# AutoEvaluateAnswers
This repository contains the Azure based solution developed using C# to evaluate the textual answers uploaded from students as image.

## Problem Statement :
During the covid-19 pandemic, education system is also one of the widely effected sector where the entire system went online starting from classes to submission of assignments and assessements. The teacher have to analyze the images submitted by the students and evaluate the answers. This exercise is not only tiring but also prone to errors in evaluation as well.
The idea here is to develop a Azure based solution which takes images as input and assigns the expected score to the answer using Azure Cognitive Service and Machine Learning.

## Assumptions :
* The work takes care of textual answers ONLY, I have not considered here figures, mathematical answers.
* The work is done for english language ONLY.

## Solution Architecture :

![image](https://user-images.githubusercontent.com/52653296/85231046-bc9beb00-b411-11ea-9241-769cdeb81140.png)

Azure Services Used :

* App Service
* Cognitive Service
* Key Vault
* Storage Account
* Service Bus
* Machine Learning

![image](https://user-images.githubusercontent.com/52653296/85231079-ed7c2000-b411-11ea-9d63-a250f855b3ee.png)
![image](https://user-images.githubusercontent.com/52653296/85231083-f40a9780-b411-11ea-9381-572e33b7d49c.png)

* In Machine Learning, two models were used - LDA, Extract Features from Text

## Details on the folders present in the repository :

### ARM Template :
Contains the ARM template which can be used to deploy resources used in the solution.

### AutoEvaluateAnswerScripts :
.Net framework based solution containing a class library and an MVC application.
* Class Library contains the helper files which contains the code to connect to each of the services used in the solution.
* MVC Application : Front end provided to end user to use the application.


### Test Image :
Few test images which can be used for testing the application.

## Execution of the request from the deployed application :

1. The User Uploads the image to the portal :

![image](https://user-images.githubusercontent.com/52653296/85231142-74c99380-b412-11ea-8785-3b33a6022d59.png)

2. Storage Key is retreived from Key Vault and a connection is made to storage account. The image is then uploaded to container in the storage account.
3. The image file name is sent as a message to service bus queue.
4. An entry is made to Storage table and the user is redirected to Evaluation page where the status of the request is set to "Evaluating" :

![image](https://user-images.githubusercontent.com/52653296/85231222-f15c7200-b412-11ea-9d9d-a7ffb4ca7bc4.png)

5. When the message is sent from service bus queue, it is received by Registered Call back method.
6. In the Callback method, the message is completed in the service bus queue.
7. SAS URL of the image is generated by connecting to storage account.
8. Cognitive Service is initialized using the key stored in the Key Vault and the SAS URL is passed to the CV.
9. Cognitive Service extracts the text from the image and it is sent to ML models to get the expected score based on a pre-defined metrics.
10. The score is then updated in Storage Account table which is visible to end user :

![image](https://user-images.githubusercontent.com/52653296/85231322-aa22b100-b413-11ea-9a0f-bf6315669ff9.png)

In case the details are required for a student, roll number is set as hyper link :

![image](https://user-images.githubusercontent.com/52653296/85231332-c6265280-b413-11ea-807d-ce40439aead0.png)



### Important Points on running the application :
MSI is used as authentication, hence,
* The User logged in Visual Studio must have access to Azure Service.
* If the application is deployed to Web App, then Web App must be provided a system identity and then this identity should be given access to all the Azure Services.


### Thank you!!
